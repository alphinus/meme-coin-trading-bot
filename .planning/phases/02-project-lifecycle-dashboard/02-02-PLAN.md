---
phase: 02-project-lifecycle-dashboard
plan: 02
type: execute
wave: 2
depends_on: ["02-01"]
files_modified:
  - client/src/hooks/useProjects.ts
  - client/src/hooks/useProject.ts
  - client/src/components/ProjectTabs.tsx
  - client/src/pages/ProjectList.tsx
  - client/src/App.tsx
  - client/src/i18n/locales/en.json
  - client/src/i18n/locales/de.json
autonomous: true

must_haves:
  truths:
    - "User can create a project with name, description, and assigned team members from a form"
    - "Projects appear as browser-tab-like navigation elements below the app header"
    - "Clicking a project tab navigates to that project's detail page"
    - "User sees active projects as tabs and archived projects behind an Archive tab"
    - "Tab navigation scrolls horizontally when there are many projects"
    - "All new UI text appears in both German and English"
  artifacts:
    - path: "client/src/hooks/useProjects.ts"
      provides: "Project list fetching, creation, refresh"
      exports: ["useProjects"]
    - path: "client/src/hooks/useProject.ts"
      provides: "Single project state, advance, KPI operations"
      exports: ["useProject"]
    - path: "client/src/components/ProjectTabs.tsx"
      provides: "Browser-tab-like navigation component"
      exports: ["ProjectTabs"]
    - path: "client/src/pages/ProjectList.tsx"
      provides: "Main project list page with tabs, creation form"
      exports: ["default"]
    - path: "client/src/App.tsx"
      provides: "New routes for /projects and /projects/:id"
      contains: "ProjectList"
  key_links:
    - from: "client/src/hooks/useProjects.ts"
      to: "/api/projects"
      via: "apiCall fetch wrapper"
      pattern: "apiCall.*api/projects"
    - from: "client/src/components/ProjectTabs.tsx"
      to: "react-router-dom"
      via: "useNavigate for tab clicks"
      pattern: "useNavigate|navigate"
    - from: "client/src/App.tsx"
      to: "client/src/pages/ProjectList.tsx"
      via: "Route component registration"
      pattern: "Route.*projects"
---

<objective>
Build the client-side project list experience: React hooks for project data, browser-tab-like project navigation, project creation form, and routing. After this plan, users can create projects and navigate between them via tabs.

Purpose: Connects the Phase 2 API (from Plan 01) to the React frontend, establishing the project navigation paradigm (browser tabs) that users will interact with for all project management.
Output: Working project list page with tab navigation, project creation, and routing to project detail (detail page built in Plan 03).
</objective>

<execution_context>
@/Users/developer/.claude/get-shit-done/workflows/execute-plan.md
@/Users/developer/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02-project-lifecycle-dashboard/02-RESEARCH.md
@.planning/phases/02-project-lifecycle-dashboard/02-01-SUMMARY.md
@eluma/client/src/App.tsx
@eluma/client/src/api/client.ts
@eluma/client/src/hooks/useTeam.ts
@eluma/client/src/hooks/useAuth.tsx
@eluma/client/src/pages/Dashboard.tsx
@eluma/client/src/i18n/locales/en.json
@eluma/client/src/i18n/locales/de.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create project hooks (useProjects and useProject)</name>
  <files>
    client/src/hooks/useProjects.ts
    client/src/hooks/useProject.ts
  </files>
  <action>
    1. Create client/src/hooks/useProjects.ts following the exact pattern from useTeam.ts (useState, useEffect, useCallback, apiCall wrapper):
       - State: projects (ProjectState[]), loading (boolean), error (string | null)
       - fetchProjects: GET /api/projects, sets projects from response data
       - createProject(name: string, description: string, members: string[]): POST /api/projects, returns result, calls fetchProjects on success
       - Computed values returned:
         - active: projects.filter(p => !p.archived)
         - archived: projects.filter(p => p.archived)
       - Return: { projects, active, archived, loading, error, createProject, refresh: fetchProjects }
       - Import ProjectState from "shared/types/models.js" (workspace reference, same as other hooks)

    2. Create client/src/hooks/useProject.ts for single-project operations:
       - Takes projectId: string parameter
       - State: project (ProjectState | null), loading (boolean), error (string | null)
       - fetchProject: GET /api/projects/${projectId}, sets project
       - advancePhase(phaseData?: Record<string, unknown>): POST /api/projects/${projectId}/advance with body { phaseData }, calls fetchProject on success, returns result
       - addKpi(category: string, label: string, value: number, unit: string, decisionId?: string): POST /api/projects/${projectId}/kpi, calls fetchProject on success, returns result
       - getMetrics: GET /api/projects/${projectId}/metrics, returns metrics data
       - useEffect with [projectId] dependency to fetch on mount/change
       - Return: { project, loading, error, advancePhase, addKpi, getMetrics, refresh: fetchProject }
  </action>
  <verify>
    Run `cd /Users/developer/eluma && npx tsc --build --noEmit` -- compiles without errors.
    Both hooks export correctly and use the existing apiCall wrapper pattern.
  </verify>
  <done>
    useProjects hook fetches project list, creates projects, and separates active/archived. useProject hook fetches single project, supports phase advancement, KPI addition, and metrics retrieval.
  </done>
</task>

<task type="auto">
  <name>Task 2: Build project tab navigation, list page, and routing</name>
  <files>
    client/src/components/ProjectTabs.tsx
    client/src/pages/ProjectList.tsx
    client/src/App.tsx
    client/src/i18n/locales/en.json
    client/src/i18n/locales/de.json
  </files>
  <action>
    1. Create client/src/components/ProjectTabs.tsx:
       - Props: projects (array of {id, name, currentPhase, archived}), activeId (string | null), onSelect (id: string) => void, onArchiveClick () => void, onNewClick () => void
       - Renders a horizontal tab bar below the header area
       - Each active (non-archived) project is a tab button showing project name and a small phase badge (e.g., abbreviated phase name)
       - Active tab has a distinct bottom border (like a browser tab) and slightly different background
       - Tab bar has overflow-x: auto with white-space: nowrap on tabs, flex-shrink: 0 per tab (per research pitfall 5)
       - If any archived projects exist, show an "Archive" tab at the far right with a muted style
       - A "+" button at the end for creating new projects
       - Use inline CSS consistent with the project's style approach (see Dashboard.tsx, App.tsx)
       - Style: clean, calm, not playful (per PROJECT.md)
       - Translate tab labels where applicable using useLanguage hook (e.g., "Archive", phase names)

    2. Create client/src/pages/ProjectList.tsx:
       - Main page for project management
       - Uses useProjects() hook to get project list
       - Uses useLanguage() for translations
       - Shows ProjectTabs at top with all projects
       - Has a "Create Project" modal/section (initially hidden, shown when "+" clicked):
         - Form with: name (text input), description (textarea), team member checkboxes (fetch from /api/teams/members via useTeam or direct apiCall)
         - Submit calls createProject from useProjects hook
         - On success, navigate to new project's detail page
       - When a tab is clicked, navigate to /projects/:id using react-router-dom's useNavigate
       - When Archive tab clicked, navigate to /projects/archive
       - Show loading state while projects load
       - Show empty state with create prompt when no projects exist
       - Layout: full width, tabs at top, content below

    3. Update client/src/App.tsx:
       - Import ProjectList (lazy or direct)
       - Add routes:
         - /projects -> ProtectedRoute > AppLayout > ProjectList
         - /projects/archive -> ProtectedRoute > AppLayout > ProjectList (with archive mode prop or handled via URL)
         - /projects/:id -> ProtectedRoute > AppLayout > placeholder div saying "Project detail coming in Plan 03" (temporary)
       - Add a "Projects" link in the AppLayout header (headerLeft section, next to logo) that navigates to /projects

    4. Update i18n locale files (en.json and de.json):
       Add keys for all new UI text. At minimum:
       - project.create_title / Projekt erstellen
       - project.create_button / Erstellen
       - project.name_label / Projektname / Project name
       - project.description_label / Beschreibung / Description
       - project.members_label / Teammitglieder / Team members
       - project.archive_tab / Archiv / Archive
       - project.new_button / Neues Projekt / New project
       - project.empty_state / Noch keine Projekte. Erstellen Sie Ihr erstes Projekt. / No projects yet. Create your first project.
       - project.loading / Projekte laden... / Loading projects...
       - Phase name translations for all 8 phases (e.g., project.phase.idea / Idee, project.phase.feasibility / Machbarkeit, etc.)
       - project.current_phase / Aktuelle Phase / Current phase

    Use the existing useLanguage() hook (wraps useTranslation) consistently -- do NOT use useTranslation directly.
  </action>
  <verify>
    Run `cd /Users/developer/eluma && npx tsc --build --noEmit` -- compiles without errors.
    Start server: `cd /Users/developer/eluma && npm run dev` and verify:
    1. Navigate to /projects -- see empty state or project list
    2. Click "+" -- create project form appears
    3. Create a project -- it appears as a tab
    4. Click a project tab -- navigates to /projects/:id
    5. Check both English and German translations appear correctly
  </verify>
  <done>
    ProjectTabs renders browser-tab-like navigation with horizontal scrolling. ProjectList page shows projects as tabs with create form. App.tsx has routes for /projects, /projects/:id, and /projects/archive. All UI text has German and English translations. Navigation from /home includes a Projects link.
  </done>
</task>

</tasks>

<verification>
- TypeScript compiles: `cd /Users/developer/eluma && npx tsc --build --noEmit`
- Project list page renders at /projects
- Creating a project adds a tab to the navigation
- Clicking tabs navigates to project detail route
- UI text is translated in both DE and EN
- Tab bar scrolls horizontally with overflow
</verification>

<success_criteria>
- Users can create projects from the UI with name, description, and member selection
- Projects appear as browser-tab-like elements in a horizontal tab bar
- Tab navigation correctly routes to /projects/:id
- Archive tab is visible when archived projects exist
- All text is available in German and English
</success_criteria>

<output>
After completion, create `.planning/phases/02-project-lifecycle-dashboard/02-02-SUMMARY.md`
</output>
