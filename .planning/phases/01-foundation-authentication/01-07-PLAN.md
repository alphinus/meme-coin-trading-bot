---
phase: 01-foundation-authentication
plan: 07
type: execute
wave: 5
depends_on: ["01-02", "01-03", "01-04", "01-05", "01-06"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "Complete flow works end-to-end: setup -> register -> team -> dashboard -> activity feed"
    - "Authentication persists across browser refresh"
    - "Language switching works and persists"
    - "Event store records all state changes with correlation IDs"
    - "Memory files are Git-versioned and externally editable"
    - "App starts and runs via pm2"
  artifacts: []
  key_links: []
---

<objective>
Verify the complete Phase 1 foundation works end-to-end with a human walkthrough.

Purpose: Confirm all Phase 1 requirements (AUTH-01 through AUTH-04, I18N-01, INFRA-01 through INFRA-06) are met before moving to Phase 2.
Output: Verified working platform foundation.
</objective>

<execution_context>
@/Users/developer/.claude/get-shit-done/workflows/execute-plan.md
@/Users/developer/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-foundation-authentication/01-CONTEXT.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
    Complete Phase 1 foundation:
    - Passkey/password authentication (AUTH-01 override)
    - Team creation and member invitation (AUTH-02)
    - Session persistence across refresh (AUTH-03)
    - Open visibility for team members (AUTH-04)
    - German/English i18n with language switcher (I18N-01)
    - Native deployment via pm2 (INFRA-01)
    - Install scripts for macOS/Linux (INFRA-02)
    - Filesystem memory with per-project folders (INFRA-03)
    - Path allowlist security (INFRA-04)
    - Git-backed memory versioning (INFRA-05)
    - GitHub repo auto-creation (INFRA-06)
    - 3-step setup wizard with system capability discovery
    - Activity feed timeline
    - Event-sourced architecture (all state changes as JSONL events)
  </what-built>
  <how-to-verify>
    **Pre-check:** Ensure app is running via `pm2 status` or `npm run dev`

    **Test 1: Fresh Setup Flow**
    1. Delete the data/ directory and restart the app
    2. Open http://localhost:3000 -- should redirect to /setup
    3. Step 1: Choose language (test switching between DE/EN), create account (username: elvis, password: test12345)
    4. Step 2: Create team "Eluma"
    5. Step 3: System scan -- verify capabilities are detected (at minimum: git, node, npm, gh)
    6. Complete setup -- should redirect to Dashboard

    **Test 2: Authentication**
    7. Verify Dashboard shows "Welcome, Elvis" and team "Eluma"
    8. Refresh the browser (F5) -- should remain logged in (AUTH-03)
    9. Open DevTools -> Application -> Cookies -- verify session cookie exists
    10. Click logout -- should redirect to /login
    11. Log back in with username/password -- should return to Dashboard

    **Test 3: Team & Open Visibility**
    12. Open a new browser/incognito window
    13. Navigate to http://localhost:3000 -- should show /login (setup already done)
    14. Register second user: username "mario"
    15. As Elvis (first browser): invite Mario to team
    16. As Mario (second browser): verify Mario sees the Eluma team and same activity feed

    **Test 4: i18n**
    17. Switch language to German -- all text should be in German
    18. Refresh -- should stay in German
    19. Switch to English -- all text in English
    20. Refresh -- should stay in English

    **Test 5: Activity Feed**
    21. Verify activity feed shows events: user registrations, team creation, member additions
    22. Each event should show timestamp, who did it, and what happened

    **Test 6: Filesystem Memory**
    23. Check data/memory/ directory exists
    24. Create a memory file via API or UI (if available)
    25. Edit the file externally (e.g., `echo "test" >> data/memory/{project}/elvis.md`)
    26. Wait 6 seconds, check `git -C data/memory log` -- should show auto-commit
    27. Verify event store has memory events: `cat data/events/memory.jsonl`

    **Test 7: Event Store**
    28. Check data/events/ directory -- should have .jsonl files
    29. Open any .jsonl file -- each line should be valid JSON with id, type, timestamp, correlationId
    30. Verify grep works: `grep "team.created" data/events/team.jsonl`

    **Test 8: GitHub Integration (if gh CLI available)**
    31. If gh is installed and authenticated: test creating a test repo via API
    32. Verify repo appears on GitHub
    33. Delete the test repo manually after verification

    **Test 9: Deployment**
    34. Stop dev server, run `npm run build`
    35. Start via pm2: `pm2 start ecosystem.config.js`
    36. Verify app accessible at http://localhost:3000
    37. Check logs: `pm2 logs eluma`
  </how-to-verify>
  <resume-signal>Type "approved" if all tests pass, or describe any issues found.</resume-signal>
</task>

</tasks>

<verification>
All Phase 1 success criteria from the roadmap:
1. User can sign in with passkey/password and remain signed in across browser refreshes
2. User can create a team and invite another person
3. All team members can see all projects within their team (open visibility)
4. User can switch the UI between German and English, and the choice persists
5. Every state change is stored as an append-only event with a correlation ID
6. App runs natively on local hardware via pm2 without Docker
7. Local filesystem memory system is active with per-project folders, per-member Markdown files, Git-backed versioning, and filesystem allowlist protection
8. Per-project GitHub repositories can be auto-created from within the app
</verification>

<success_criteria>
All 9 test groups pass. User confirms "approved".
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-authentication/01-07-SUMMARY.md`
</output>
