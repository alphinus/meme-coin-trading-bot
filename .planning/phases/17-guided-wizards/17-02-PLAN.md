---
phase: 17-guided-wizards
plan: 02
type: execute
wave: 2
depends_on: ["17-01"]
files_modified:
  - client/src/components/wizards/OnboardingWizard/OnboardingWizard.tsx
  - client/src/components/wizards/OnboardingWizard/StepWelcome.tsx
  - client/src/components/wizards/OnboardingWizard/StepFlowOverview.tsx
  - client/src/components/wizards/OnboardingWizard/StepGetStarted.tsx
  - client/src/components/wizards/IdeaCreationWizard/IdeaCreationWizard.tsx
  - client/src/components/wizards/IdeaCreationWizard/StepInputType.tsx
  - client/src/components/wizards/IdeaCreationWizard/StepProvideInput.tsx
  - client/src/components/wizards/IdeaCreationWizard/StepConfirmation.tsx
  - client/src/hooks/useOnboarding.ts
  - client/src/pages/Dashboard.tsx
  - client/src/pages/IdeaPool.tsx
  - client/src/i18n/locales/en.json
  - client/src/i18n/locales/de.json
autonomous: true

must_haves:
  truths:
    - "First-time user visiting Dashboard sees onboarding wizard explaining Idea -> Project -> Execution flow"
    - "After completing onboarding, user does not see the wizard again on subsequent visits"
    - "User can create an idea via guided wizard that walks through input type selection, input entry, and confirmation"
    - "Idea creation wizard supports text input and voice recording input types"
    - "All onboarding and idea wizard text renders correctly in both DE and EN"
  artifacts:
    - path: "client/src/components/wizards/OnboardingWizard/OnboardingWizard.tsx"
      provides: "3-step onboarding wizard using WizardShell"
      min_lines: 20
    - path: "client/src/components/wizards/IdeaCreationWizard/IdeaCreationWizard.tsx"
      provides: "3-step idea creation wizard using WizardShell"
      min_lines: 20
    - path: "client/src/hooks/useOnboarding.ts"
      provides: "Onboarding state detection and completion tracking"
    - path: "client/src/pages/Dashboard.tsx"
      provides: "Onboarding wizard trigger on first visit"
  key_links:
    - from: "client/src/components/wizards/OnboardingWizard/OnboardingWizard.tsx"
      to: "client/src/components/wizards/WizardShell.tsx"
      via: "import WizardShell"
      pattern: "WizardShell"
    - from: "client/src/components/wizards/IdeaCreationWizard/IdeaCreationWizard.tsx"
      to: "client/src/components/wizards/WizardShell.tsx"
      via: "import WizardShell"
      pattern: "WizardShell"
    - from: "client/src/pages/Dashboard.tsx"
      to: "client/src/hooks/useOnboarding.ts"
      via: "useOnboarding hook check"
      pattern: "useOnboarding"
    - from: "client/src/pages/IdeaPool.tsx"
      to: "client/src/components/wizards/IdeaCreationWizard/IdeaCreationWizard.tsx"
      via: "guided create button"
      pattern: "IdeaCreationWizard"
---

<objective>
Build the onboarding wizard (WIZ-01) and idea creation wizard (WIZ-02), integrate the onboarding wizard into Dashboard with first-visit detection, and add a guided idea creation flow to IdeaPool.

Purpose: First-time users need a clear explanation of Eluma's flow (Idea -> Project -> Execution) and a step-by-step guided way to create their first idea. These two wizards use WizardShell from Plan 01 and are independent from the quality gate wizard in Plan 03.

Output: OnboardingWizard with 3 steps, IdeaCreationWizard with 3 steps, useOnboarding hook, Dashboard and IdeaPool integration, i18n keys for both wizards in DE and EN.
</objective>

<execution_context>
@/Users/developer/.claude/get-shit-done/workflows/execute-plan.md
@/Users/developer/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/17-guided-wizards/17-RESEARCH.md
@.planning/phases/17-guided-wizards/17-01-SUMMARY.md

# Existing components to integrate with
@client/src/pages/Dashboard.tsx
@client/src/pages/IdeaPool.tsx
@client/src/components/VoiceRecorder.tsx
@client/src/components/wizards/WizardShell.tsx
@client/src/hooks/useMode.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Build OnboardingWizard with first-visit detection and Dashboard integration</name>
  <files>
    client/src/components/wizards/OnboardingWizard/OnboardingWizard.tsx
    client/src/components/wizards/OnboardingWizard/StepWelcome.tsx
    client/src/components/wizards/OnboardingWizard/StepFlowOverview.tsx
    client/src/components/wizards/OnboardingWizard/StepGetStarted.tsx
    client/src/hooks/useOnboarding.ts
    client/src/pages/Dashboard.tsx
    client/src/i18n/locales/en.json
    client/src/i18n/locales/de.json
  </files>
  <action>
    **1. Create client/src/hooks/useOnboarding.ts:**

    ```typescript
    const ONBOARDING_KEY = "eluma-onboarding-completed";

    export function useOnboarding() {
      const [showOnboarding, setShow] = useState(() => {
        return !localStorage.getItem(ONBOARDING_KEY);
      });

      const completeOnboarding = useCallback(() => {
        localStorage.setItem(ONBOARDING_KEY, "true");
        setShow(false);
      }, []);

      const resetOnboarding = useCallback(() => {
        localStorage.removeItem(ONBOARDING_KEY);
        setShow(true);
      }, []);

      return { showOnboarding, completeOnboarding, resetOnboarding };
    }
    ```

    **2. Create OnboardingWizard step components** (all in `client/src/components/wizards/OnboardingWizard/`):

    **StepWelcome.tsx:**
    - Renders welcome message: title (`wizard.onboarding.welcome_title`), description (`wizard.onboarding.welcome_desc`)
    - Shows Eluma logo or a simple welcome icon (use a Unicode symbol or emoji like a wave)
    - Single "Get Started" button calls `onComplete()`
    - Use `useLanguage` for `t()` -- follow project convention
    - Inline `React.CSSProperties` styling: centered text, large title, readable description

    **StepFlowOverview.tsx:**
    - Visual explanation of Eluma's 3-stage flow: Idea -> Project -> Execution
    - Render 3 numbered cards in a vertical stack:
      1. "Capture Ideas" (`wizard.onboarding.flow_step1`) -- text/voice/GitHub icon
      2. "Refine & Answer Questions" (`wizard.onboarding.flow_step2`) -- guided questions
      3. "Execute as Project" (`wizard.onboarding.flow_step3`) -- project lifecycle
    - Each card has a number circle (1/2/3), title, and brief description
    - Arrow or line connecting the cards vertically
    - "Next" button calls `onComplete()`
    - "Back" button calls `onBack?.()` if provided

    **StepGetStarted.tsx:**
    - "You're ready!" message (`wizard.onboarding.ready_title`)
    - Two action buttons:
      - "Create Your First Idea" (`wizard.onboarding.action_idea`) -- primary button, calls `onComplete({ action: "idea" })`
      - "Explore Dashboard" (`wizard.onboarding.action_explore`) -- secondary button, calls `onComplete({ action: "explore" })`
    - Brief explanation text: what each option does

    **3. Create OnboardingWizard.tsx:**
    - Imports WizardShell from `../WizardShell.js`
    - Defines 3 steps array using StepWelcome, StepFlowOverview, StepGetStarted
    - `titleKey: "wizard.onboarding.title"` (e.g., "Welcome to Eluma")
    - `onComplete` receives accumulated data, calls the `onDone` prop
    - Props: `onDone: (action?: string) => void`

    **4. Integrate into Dashboard.tsx:**
    - Import `useOnboarding` and `OnboardingWizard`
    - At the top of the component, check `showOnboarding`
    - If `showOnboarding`, render OnboardingWizard as a full-page overlay (or replace dashboard content)
    - On wizard completion: call `completeOnboarding()`, then if action is "idea" navigate to `/ideas`
    - The onboarding wizard shows regardless of Simple/Expert mode (it's for ALL first-time users)

    **5. Add i18n keys** to both en.json and de.json under `wizard.onboarding`:
    ```
    wizard.onboarding.title: "Welcome to Eluma" / "Willkommen bei Eluma"
    wizard.onboarding.step_welcome: "Welcome" / "Willkommen"
    wizard.onboarding.step_flow: "How It Works" / "So funktioniert's"
    wizard.onboarding.step_start: "Get Started" / "Loslegen"
    wizard.onboarding.welcome_title: "Welcome to Eluma" / "Willkommen bei Eluma"
    wizard.onboarding.welcome_desc: "Eluma helps you capture ideas, refine them with guided questions, and turn them into structured projects." / "Eluma hilft dir, Ideen festzuhalten, sie mit geführten Fragen zu verfeinern und in strukturierte Projekte umzuwandeln."
    wizard.onboarding.flow_step1: "Capture ideas by voice, text, or GitHub link" / "Ideen per Sprache, Text oder GitHub-Link festhalten"
    wizard.onboarding.flow_step2: "Answer guided questions to refine your idea" / "Geführte Fragen beantworten, um deine Idee zu verfeinern"
    wizard.onboarding.flow_step3: "Graduate ideas into structured projects" / "Ideen zu strukturierten Projekten machen"
    wizard.onboarding.flow_step1_desc: "Use voice recording, type it out, or paste a GitHub URL to capture your idea" / "Nutze Sprachaufnahme, tippe es ein oder füge eine GitHub-URL ein, um deine Idee festzuhalten"
    wizard.onboarding.flow_step2_desc: "Answer key questions about feasibility, scope, and target audience" / "Beantworte Schlüsselfragen zu Machbarkeit, Umfang und Zielgruppe"
    wizard.onboarding.flow_step3_desc: "Once all questions are answered, your idea becomes a full project with workflow" / "Sobald alle Fragen beantwortet sind, wird deine Idee ein vollständiges Projekt mit Workflow"
    wizard.onboarding.ready_title: "You're ready!" / "Du bist bereit!"
    wizard.onboarding.ready_desc: "You now know how Eluma works. What would you like to do first?" / "Du weißt jetzt, wie Eluma funktioniert. Was möchtest du als Erstes tun?"
    wizard.onboarding.action_idea: "Create Your First Idea" / "Deine erste Idee erstellen"
    wizard.onboarding.action_explore: "Explore Dashboard" / "Dashboard erkunden"
    ```
  </action>
  <verify>
    - `npx tsc --noEmit` passes
    - All 4 OnboardingWizard files exist in `client/src/components/wizards/OnboardingWizard/`
    - `client/src/hooks/useOnboarding.ts` exists
    - Dashboard.tsx imports and conditionally renders OnboardingWizard
    - Both en.json and de.json have `wizard.onboarding.*` keys
  </verify>
  <done>
    First-time Dashboard visitor sees a 3-step onboarding wizard (Welcome -> Flow Overview -> Get Started). After completion, localStorage flag prevents re-display. User can choose to create an idea or explore the dashboard. All text i18n'd in DE and EN.
  </done>
</task>

<task type="auto">
  <name>Task 2: Build IdeaCreationWizard and integrate into IdeaPool page</name>
  <files>
    client/src/components/wizards/IdeaCreationWizard/IdeaCreationWizard.tsx
    client/src/components/wizards/IdeaCreationWizard/StepInputType.tsx
    client/src/components/wizards/IdeaCreationWizard/StepProvideInput.tsx
    client/src/components/wizards/IdeaCreationWizard/StepConfirmation.tsx
    client/src/pages/IdeaPool.tsx
    client/src/i18n/locales/en.json
    client/src/i18n/locales/de.json
  </files>
  <action>
    **1. Create IdeaCreationWizard step components** (all in `client/src/components/wizards/IdeaCreationWizard/`):

    **StepInputType.tsx:**
    - Title: "How would you like to add your idea?" (`wizard.idea.input_type_title`)
    - Three large button cards (vertical stack, each with icon + label + description):
      1. "Type it out" (`wizard.idea.input_text`) -- keyboard/pencil Unicode icon
      2. "Record by voice" (`wizard.idea.input_voice`) -- microphone Unicode icon
      3. "Analyze a GitHub repo" (`wizard.idea.input_github`) -- link/code Unicode icon
    - Clicking a card calls `onComplete({ inputType: "text" | "voice" | "github" })`
    - No back button (first step)
    - Inline CSSProperties: cards with border, padding, hover effect via onMouseEnter/Leave state

    **StepProvideInput.tsx:**
    - Reads `wizardData.inputType` to determine which input to show
    - **If inputType === "text":** Render a textarea with placeholder (`wizard.idea.text_placeholder`), minimum 10 chars, "Next" button enabled when valid. Calls `onComplete({ rawInput: textValue })`.
    - **If inputType === "voice":** Embed the existing `VoiceRecorder` component with an `onTranscription` callback. When transcription is received, auto-advance by calling `onComplete({ rawInput: transcribedText })`. Show the transcribed text before advancing so user can confirm.
    - **If inputType === "github":** Render a text input for GitHub URL with placeholder (`wizard.idea.github_placeholder`), validate URL format (must match `github.com/{owner}/{repo}`). Calls `onComplete({ rawInput: githubUrl, inputType: "github" })`.
    - Back button calls `onBack?.()`

    **StepConfirmation.tsx:**
    - Shows a summary of what will be created:
      - Input type badge (Text/Voice/GitHub)
      - Preview of the input content (truncated if long)
    - "Create Idea" primary button -- calls `onComplete({ confirmed: true })`
    - "Back" secondary button -- calls `onBack?.()`
    - Informational text: "Your idea will appear in the Idea Pool for refinement" (`wizard.idea.confirmation_desc`)

    **2. Create IdeaCreationWizard.tsx:**
    - Imports WizardShell
    - Defines 3 steps: StepInputType, StepProvideInput, StepConfirmation
    - `titleKey: "wizard.idea.title"` ("Create New Idea")
    - `onComplete` receives accumulated data, calls `onDone(data)` prop
    - Props: `onDone: (data: Record<string, unknown>) => void`, `onCancel?: () => void`

    **3. Integrate into IdeaPool.tsx:**
    - Add a state `showCreateWizard` (boolean, default false)
    - Add a "Create Idea" button (or "Guided Create" button next to existing create flow) that sets `showCreateWizard = true`
    - When `showCreateWizard` is true, render IdeaCreationWizard as an overlay or replace the main content
    - On wizard `onDone`: extract `rawInput` and `inputType`, call existing `createIdea` from `useIdeaPool` hook, set `showCreateWizard = false`
    - For GitHub input type: instead of creating a regular idea, call the GitHub analysis API (`POST /api/github/analyze` with the URL), which auto-creates an idea. Show a brief loading state.
    - `onCancel`: set `showCreateWizard = false`
    - The wizard is available in both Simple and Expert modes

    **4. Add i18n keys** to both en.json and de.json under `wizard.idea`:
    ```
    wizard.idea.title: "Create New Idea" / "Neue Idee erstellen"
    wizard.idea.step_type: "Input Type" / "Eingabeart"
    wizard.idea.step_input: "Your Idea" / "Deine Idee"
    wizard.idea.step_confirm: "Confirm" / "Bestätigen"
    wizard.idea.input_type_title: "How would you like to add your idea?" / "Wie möchtest du deine Idee hinzufügen?"
    wizard.idea.input_text: "Type it out" / "Eintippen"
    wizard.idea.input_text_desc: "Write your idea in your own words" / "Schreibe deine Idee in eigenen Worten"
    wizard.idea.input_voice: "Record by voice" / "Per Sprache aufnehmen"
    wizard.idea.input_voice_desc: "Speak your idea and we'll transcribe it" / "Sprich deine Idee und wir schreiben sie auf"
    wizard.idea.input_github: "Analyze a GitHub repo" / "GitHub-Repo analysieren"
    wizard.idea.input_github_desc: "Paste a GitHub URL for automatic analysis" / "Füge eine GitHub-URL für die automatische Analyse ein"
    wizard.idea.text_placeholder: "Describe your idea..." / "Beschreibe deine Idee..."
    wizard.idea.github_placeholder: "https://github.com/owner/repo" / "https://github.com/besitzer/repo"
    wizard.idea.confirmation_title: "Review Your Idea" / "Deine Idee überprüfen"
    wizard.idea.confirmation_desc: "Your idea will appear in the Idea Pool for refinement" / "Deine Idee wird im Ideenpool zur Verfeinerung erscheinen"
    wizard.idea.create_button: "Create Idea" / "Idee erstellen"
    wizard.idea.creating: "Creating idea..." / "Idee wird erstellt..."
    wizard.idea.input_type_label: "Input type" / "Eingabeart"
    wizard.idea.guided_create: "Guided Create" / "Geführt erstellen"
    ```
  </action>
  <verify>
    - `npx tsc --noEmit` passes
    - All 4 IdeaCreationWizard files exist in `client/src/components/wizards/IdeaCreationWizard/`
    - IdeaPool.tsx has a button/mechanism to launch IdeaCreationWizard
    - IdeaCreationWizard supports text and voice input types
    - Both en.json and de.json have `wizard.idea.*` keys
  </verify>
  <done>
    User can launch a guided idea creation wizard from IdeaPool. Wizard walks through 3 steps: choose input type (text/voice/GitHub) -> provide input -> confirm and create. Voice input embeds existing VoiceRecorder. GitHub input triggers repo analysis. All text i18n'd in DE and EN.
  </done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` -- TypeScript compiles clean
2. OnboardingWizard renders 3 steps using WizardShell from Plan 01
3. First-time Dashboard visitor sees onboarding wizard; returning visitor does not
4. IdeaCreationWizard renders 3 steps for guided idea creation
5. IdeaPool page has a button to launch the wizard
6. VoiceRecorder is embedded in the voice input step
7. All text uses i18n keys and renders in both DE and EN
</verification>

<success_criteria>
- Onboarding wizard appears on first Dashboard visit, does not reappear after completion
- Idea creation wizard supports text and voice input types through guided steps
- Both wizards use WizardShell from Plan 01 for consistent look and feel
- All strings i18n'd in DE and EN
- No new npm dependencies
</success_criteria>

<output>
After completion, create `.planning/phases/17-guided-wizards/17-02-SUMMARY.md`
</output>
