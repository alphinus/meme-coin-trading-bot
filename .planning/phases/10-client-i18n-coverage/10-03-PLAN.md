---
phase: 10-client-i18n-coverage
plan: 03
type: execute
wave: 3
depends_on: ["10-02"]
files_modified:
  - client/src/pages/SoulDocument.tsx
  - client/src/components/SoulDocumentViewer.tsx
  - client/src/components/SoulDocumentEntry.tsx
  - client/src/components/SoulDocumentNav.tsx
  - client/src/pages/MetaSoulDocument.tsx
  - client/src/i18n/locales/en.json
  - client/src/i18n/locales/de.json
autonomous: true

must_haves:
  truths:
    - "Soul Document page title, description, placeholder, buttons, and loading/error text appear in German when language is DE"
    - "Soul Document entry source type badges appear in German when language is DE"
    - "Soul Document viewer empty state appears in German when language is DE"
    - "Soul Document entry delete confirmation text appears in German when language is DE"
    - "Soul Document navigation pills (My Soul Document, Meta Soul Document) appear in German when language is DE"
    - "Meta Soul Document page title, description, section headings, empty state, and entry/entries label appear in German when language is DE"
  artifacts:
    - path: "client/src/pages/SoulDocument.tsx"
      provides: "i18n-enabled Soul Document page"
      contains: "useLanguage"
    - path: "client/src/components/SoulDocumentViewer.tsx"
      provides: "i18n-enabled viewer with translated empty state"
      contains: "useLanguage"
    - path: "client/src/components/SoulDocumentEntry.tsx"
      provides: "i18n-enabled entry with translated source types and delete UI"
      contains: "useLanguage"
    - path: "client/src/components/SoulDocumentNav.tsx"
      provides: "i18n-enabled navigation pills"
      contains: "useLanguage"
    - path: "client/src/pages/MetaSoulDocument.tsx"
      provides: "i18n-enabled meta soul document page"
      contains: "useLanguage"
    - path: "client/src/i18n/locales/en.json"
      provides: "English keys for soulDoc namespace"
    - path: "client/src/i18n/locales/de.json"
      provides: "German keys for soulDoc namespace"
  key_links:
    - from: "client/src/pages/SoulDocument.tsx"
      to: "en.json/de.json"
      via: "t() calls"
      pattern: "t\\(\"soulDoc\\."
    - from: "client/src/components/SoulDocumentEntry.tsx"
      to: "en.json/de.json"
      via: "t() calls for source type labels"
      pattern: "t\\(\"soulDoc\\.source_"
---

<objective>
Internationalize the entire Soul Document feature: SoulDocument page, SoulDocumentViewer, SoulDocumentEntry, SoulDocumentNav, and MetaSoulDocument page (5 files, ~36 keys).

Purpose: The Soul Document is a core feature with a page, sub-components, and entry-level badges. The `formatSourceType` function and delete confirmation text are hardcoded English. Adding i18n ensures the full Soul Document experience works in German, covering requirement I18N-01.

Output: Five Soul Document files fully i18n-enabled + ~36 new keys in both en.json and de.json.
</objective>

<execution_context>
@/Users/developer/.claude/get-shit-done/workflows/execute-plan.md
@/Users/developer/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-client-i18n-coverage/10-02-SUMMARY.md
@client/src/hooks/useLanguage.ts
@client/src/i18n/locales/en.json
@client/src/i18n/locales/de.json
@client/src/pages/SoulDocument.tsx
@client/src/components/SoulDocumentViewer.tsx
@client/src/components/SoulDocumentEntry.tsx
@client/src/components/SoulDocumentNav.tsx
@client/src/pages/MetaSoulDocument.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add translation keys for Soul Document feature to both locale files</name>
  <files>client/src/i18n/locales/en.json, client/src/i18n/locales/de.json</files>
  <action>
Add a `"soulDoc"` top-level namespace to both en.json and de.json. Both files must be updated in the same commit.

**en.json — add `"soulDoc"` namespace:**
```json
"soulDoc": {
  "loading": "Loading Soul Document...",
  "title": "Soul Document: {{name}}",
  "description": "A persistent record of thinking patterns, decisions, and reflections.",
  "retry": "Retry",
  "placeholder": "Add a reflection, thought, or note...",
  "hint_submit": "Cmd+Enter to submit",
  "adding": "Adding...",
  "add_entry": "Add Entry",
  "entries_count": "Entries ({{count}})",
  "empty": "No entries yet. Soul Documents grow automatically from your project activity.",
  "remove": "Remove",
  "confirm_remove": "Remove this entry? It will be hidden but preserved in the audit log.",
  "confirm": "Confirm",
  "cancel": "Cancel",
  "project_label": "Project: {{id}}",
  "source_decision": "Decision",
  "source_status_change": "Status Change",
  "source_kpi": "KPI",
  "source_text": "Text",
  "source_audio": "Audio",
  "source_ai_reflection": "AI Reflection",
  "source_pattern_match": "Pattern Match",
  "source_override": "Override",
  "source_assumption": "Assumption",
  "nav_my_document": "My Soul Document",
  "nav_meta_document": "Meta Soul Document",
  "meta_loading": "Loading Meta Soul Document...",
  "meta_title": "Meta Soul Document",
  "meta_description": "Team-level patterns and activity across all members. AI-powered analysis will be available after Phase 4.",
  "meta_empty": "No Soul Document entries yet. Team members will have entries once project activity begins.",
  "meta_source_types": "Source Types",
  "meta_recent_entries": "Recent Entries",
  "meta_entry_count": "{{count}} entry",
  "meta_entry_count_plural": "{{count}} entries",
  "meta_patterns": "Patterns",
  "meta_patterns_placeholder": "Pattern analysis will be powered by AI in a future update."
}
```

**de.json — add `"soulDoc"` namespace:**
```json
"soulDoc": {
  "loading": "Soul Document wird geladen...",
  "title": "Soul Document: {{name}}",
  "description": "Eine dauerhafte Aufzeichnung von Denkmustern, Entscheidungen und Reflexionen.",
  "retry": "Erneut versuchen",
  "placeholder": "Reflexion, Gedanke oder Notiz hinzufügen...",
  "hint_submit": "Cmd+Enter zum Absenden",
  "adding": "Wird hinzugefügt...",
  "add_entry": "Eintrag hinzufügen",
  "entries_count": "Einträge ({{count}})",
  "empty": "Noch keine Einträge. Soul Documents wachsen automatisch durch Ihre Projektaktivität.",
  "remove": "Entfernen",
  "confirm_remove": "Diesen Eintrag entfernen? Er wird ausgeblendet, aber im Prüfprotokoll aufbewahrt.",
  "confirm": "Bestätigen",
  "cancel": "Abbrechen",
  "project_label": "Projekt: {{id}}",
  "source_decision": "Entscheidung",
  "source_status_change": "Statusänderung",
  "source_kpi": "KPI",
  "source_text": "Text",
  "source_audio": "Audio",
  "source_ai_reflection": "KI-Reflexion",
  "source_pattern_match": "Mustererkennung",
  "source_override": "Überschreibung",
  "source_assumption": "Annahme",
  "nav_my_document": "Mein Soul Document",
  "nav_meta_document": "Meta-Soul-Document",
  "meta_loading": "Meta-Soul-Document wird geladen...",
  "meta_title": "Meta-Soul-Document",
  "meta_description": "Muster und Aktivitäten auf Teamebene über alle Mitglieder hinweg. KI-gestützte Analyse wird in einem zukünftigen Update verfügbar sein.",
  "meta_empty": "Noch keine Soul-Document-Einträge. Teammitglieder erhalten Einträge, sobald Projektaktivität beginnt.",
  "meta_source_types": "Quelltypen",
  "meta_recent_entries": "Letzte Einträge",
  "meta_entry_count": "{{count}} Eintrag",
  "meta_entry_count_plural": "{{count}} Einträge",
  "meta_patterns": "Muster",
  "meta_patterns_placeholder": "Musteranalyse wird in einem zukünftigen Update durch KI unterstützt."
}
```

IMPORTANT: German text must use proper Unicode umlauts. "Soul Document" is a product name and stays English in both locales. Translate full phrases, never concatenate.
  </action>
  <verify>Run `node -e "const en = require('./client/src/i18n/locales/en.json'); const de = require('./client/src/i18n/locales/de.json'); console.log('soulDoc EN:', Object.keys(en.soulDoc).length, 'DE:', Object.keys(de.soulDoc).length);"` — both have matching key count (~36 keys).</verify>
  <done>en.json and de.json each contain the soulDoc namespace with ~36 keys, matching key counts, and proper German Unicode.</done>
</task>

<task type="auto">
  <name>Task 2: Wire useLanguage into all five Soul Document component files</name>
  <files>client/src/pages/SoulDocument.tsx, client/src/components/SoulDocumentViewer.tsx, client/src/components/SoulDocumentEntry.tsx, client/src/components/SoulDocumentNav.tsx, client/src/pages/MetaSoulDocument.tsx</files>
  <action>
For each component, add the useLanguage import and replace hardcoded strings with t() calls.

**SoulDocument.tsx (page):**
- Add `import { useLanguage } from "../hooks/useLanguage.js";` and `const { t } = useLanguage();`
- `"Loading Soul Document..."` -> `t("soulDoc.loading")`
- `"Soul Document: " + displayName` -> `t("soulDoc.title", { name: displayName })`
- `"A persistent record of thinking patterns, decisions, and reflections."` -> `t("soulDoc.description")`
- `"Retry"` -> `t("soulDoc.retry")`
- `"Add a reflection, thought, or note..."` -> `t("soulDoc.placeholder")`
- `"Cmd+Enter to submit"` -> `t("soulDoc.hint_submit")`
- `"Adding..."` / `"Add Entry"` -> `t("soulDoc.adding")` / `t("soulDoc.add_entry")`
- `"Entries (" + count + ")"` -> `t("soulDoc.entries_count", { count: entries.filter((e) => !e.deleted).length })`

**SoulDocumentViewer.tsx:**
- Add `import { useLanguage } from "../hooks/useLanguage.js";` and `const { t } = useLanguage();`
- `"No entries yet. Soul Documents grow automatically from your project activity."` -> `t("soulDoc.empty")`

**SoulDocumentEntry.tsx:**
- Add `import { useLanguage } from "../hooks/useLanguage.js";` and `const { t } = useLanguage();`
- The module-level `formatSourceType` function converts source_type strings like `"status_change"` to `"Status Change"`. Replace this with a t() lookup. Inside the component, create a mapping:
  ```ts
  const sourceTypeLabels: Record<string, string> = {
    decision: t("soulDoc.source_decision"),
    status_change: t("soulDoc.source_status_change"),
    kpi: t("soulDoc.source_kpi"),
    text: t("soulDoc.source_text"),
    audio: t("soulDoc.source_audio"),
    ai_reflection: t("soulDoc.source_ai_reflection"),
    pattern_match: t("soulDoc.source_pattern_match"),
    override: t("soulDoc.source_override"),
    assumption: t("soulDoc.source_assumption"),
  };
  ```
  Use `sourceTypeLabels[entry.sourceType] || entry.sourceType` instead of `formatSourceType(entry.sourceType)`. The `formatSourceType` function can be removed or kept for fallback.
- `"Project: " + id` -> `t("soulDoc.project_label", { id: entry.projectId.slice(0, 8) })`
- `"Remove this entry?..."` -> `t("soulDoc.confirm_remove")`
- `"Confirm"` -> `t("soulDoc.confirm")`
- `"Cancel"` -> `t("soulDoc.cancel")`
- `"Remove"` -> `t("soulDoc.remove")`

**SoulDocumentNav.tsx:**
- Add `import { useLanguage } from "../hooks/useLanguage.js";` and `const { t } = useLanguage();`
- `"My Soul Document"` -> `t("soulDoc.nav_my_document")`
- `"Meta Soul Document"` -> `t("soulDoc.nav_meta_document")`

**MetaSoulDocument.tsx (page):**
- Add `import { useLanguage } from "../hooks/useLanguage.js";` and `const { t } = useLanguage();`
- `"Loading Meta Soul Document..."` -> `t("soulDoc.meta_loading")`
- `"Meta Soul Document"` title -> `t("soulDoc.meta_title")`
- `"Team-level patterns and activity..."` -> `t("soulDoc.meta_description")`
- `"Retry"` -> `t("soulDoc.retry")`
- `"No Soul Document entries yet..."` -> `t("soulDoc.meta_empty")`
- `entry/entries` count logic -> use `member.totalEntries === 1 ? t("soulDoc.meta_entry_count", { count: member.totalEntries }) : t("soulDoc.meta_entry_count_plural", { count: member.totalEntries })`
- `"Source Types"` -> `t("soulDoc.meta_source_types")`
- `"Recent Entries"` -> `t("soulDoc.meta_recent_entries")`
- `"Patterns"` -> `t("soulDoc.meta_patterns")`
- `"Pattern analysis will be powered by AI..."` -> `t("soulDoc.meta_patterns_placeholder")`
- The `formatSourceType` function in MetaSoulDocument.tsx also needs replacing — pass t as a prop to `SourceTypeDistribution` or use useLanguage in that sub-component. Since `SourceTypeDistribution` is defined in the same file and not exported, the simplest approach is to use the same `sourceTypeLabels` mapping approach inside the MetaSoulDocument component and pass a `getLabel` function to `SourceTypeDistribution` as a prop, or inline `useLanguage()` in the sub-component since it's all in the same file with React context available. Use `useLanguage()` directly in `SourceTypeDistribution` and `RecentEntryPreview` since they are React components rendered within the i18n provider.

IMPORTANT: Do NOT change any styling, logic, or component structure. Only replace string literals with t() calls and add imports.
  </action>
  <verify>Run `cd /Users/developer/eluma && npx tsc --noEmit` — no TypeScript errors. `grep -c "useLanguage" client/src/pages/SoulDocument.tsx client/src/components/SoulDocumentViewer.tsx client/src/components/SoulDocumentEntry.tsx client/src/components/SoulDocumentNav.tsx client/src/pages/MetaSoulDocument.tsx` — each file shows at least 1 match.</verify>
  <done>All five Soul Document files import useLanguage, call t() for every user-facing string including source type badges, and compile without errors. No hardcoded English UI text remains.</done>
</task>

</tasks>

<verification>
1. `cd /Users/developer/eluma && npx tsc --noEmit` passes with no errors
2. Both en.json and de.json parse as valid JSON
3. All five Soul Document files contain `useLanguage` import and `t()` calls
4. Source type badges (Decision, Status Change, etc.) use translated keys
5. German translations use proper Unicode umlauts
</verification>

<success_criteria>
- Soul Document page, entry list, individual entries, navigation, and Meta Soul Document all display in German when language is DE
- Source type badges show translated labels (Entscheidung, Statusänderung, etc.)
- Soul Document navigation shows "Mein Soul Document" and "Meta-Soul-Document" in German
- No hardcoded English strings remain in any of the five component files
- TypeScript compilation passes
</success_criteria>

<output>
After completion, create `.planning/phases/10-client-i18n-coverage/10-03-SUMMARY.md`
</output>
