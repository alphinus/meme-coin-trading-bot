---
phase: 10-client-i18n-coverage
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - client/src/components/SearchBar.tsx
  - client/src/components/EmailDraftReview.tsx
  - client/src/components/GitHubFork.tsx
  - client/src/i18n/locales/en.json
  - client/src/i18n/locales/de.json
autonomous: true

must_haves:
  truths:
    - "SearchBar shows all labels in German when language is DE"
    - "EmailDraftReview shows status badges, buttons, and field labels in German when language is DE"
    - "GitHubFork shows error messages, status, buttons, and hints in German when language is DE"
  artifacts:
    - path: "client/src/components/SearchBar.tsx"
      provides: "i18n-enabled search bar"
      contains: "useLanguage"
    - path: "client/src/components/EmailDraftReview.tsx"
      provides: "i18n-enabled email draft review"
      contains: "useLanguage"
    - path: "client/src/components/GitHubFork.tsx"
      provides: "i18n-enabled GitHub fork component"
      contains: "useLanguage"
    - path: "client/src/i18n/locales/en.json"
      provides: "English keys for search, emailDraft, githubFork namespaces"
    - path: "client/src/i18n/locales/de.json"
      provides: "German keys for search, emailDraft, githubFork namespaces"
  key_links:
    - from: "client/src/components/SearchBar.tsx"
      to: "en.json/de.json"
      via: "t() calls from useLanguage hook"
      pattern: "t\\(\"search\\."
    - from: "client/src/components/EmailDraftReview.tsx"
      to: "en.json/de.json"
      via: "t() calls from useLanguage hook"
      pattern: "t\\(\"emailDraft\\."
    - from: "client/src/components/GitHubFork.tsx"
      to: "en.json/de.json"
      via: "t() calls from useLanguage hook"
      pattern: "t\\(\"githubFork\\."
---

<objective>
Internationalize three small standalone components: SearchBar, EmailDraftReview, and GitHubFork.

Purpose: These three components have no i18n — all user-facing text is hardcoded English. Adding translation keys and wiring useLanguage enables full DE/EN switching for search, email draft review, and GitHub fork workflows.

Output: Three components fully i18n-enabled + ~30 new keys in both en.json and de.json.
</objective>

<execution_context>
@/Users/developer/.claude/get-shit-done/workflows/execute-plan.md
@/Users/developer/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@client/src/hooks/useLanguage.ts
@client/src/i18n/locales/en.json
@client/src/i18n/locales/de.json
@client/src/components/SearchBar.tsx
@client/src/components/EmailDraftReview.tsx
@client/src/components/GitHubFork.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add translation keys for SearchBar, EmailDraftReview, and GitHubFork to both locale files</name>
  <files>client/src/i18n/locales/en.json, client/src/i18n/locales/de.json</files>
  <action>
Add three new top-level namespaces to both en.json and de.json. Both files must be updated in the same commit per CLAUDE.md rules.

**en.json — add `"search"` namespace:**
```json
"search": {
  "title": "AI Search",
  "description": "Search across projects, ideas, and soul documents using AI.",
  "placeholder": "Ask a question about your projects, decisions, or ideas...",
  "searching": "Searching...",
  "search_button": "Search",
  "searching_with_ai": "Searching with AI...",
  "ai_answer": "AI Answer",
  "sources": "Sources",
  "sources_count": "Sources ({{count}})",
  "searched_at": "Searched at {{time}}"
}
```

**en.json — add `"emailDraft"` namespace:**
```json
"emailDraft": {
  "draft_reply": "Draft Reply",
  "status_pending": "Pending Review",
  "status_approved": "Approved",
  "status_sent": "Sent",
  "status_rejected": "Rejected",
  "field_to": "To:",
  "field_subject": "Subject:",
  "created": "Created: {{date}}",
  "updated": "Updated: {{date}}",
  "reject": "Reject",
  "approve_send": "Approve & Send"
}
```

**en.json — add `"githubFork"` namespace:**
```json
"githubFork": {
  "placeholder": "https://github.com/owner/repo",
  "fork_analyze": "Fork & Analyze",
  "url_hint": "Enter a valid GitHub URL (e.g., https://github.com/owner/repo)",
  "error_empty_url": "Please enter a GitHub URL",
  "error_invalid_url": "URL must be a valid GitHub repository (github.com/owner/repo)",
  "error_no_team": "No team found. Please create or join a team first.",
  "error_unexpected": "An unexpected error occurred",
  "status_forking": "Forking...",
  "status_analyzing": "Analyzing code...",
  "status_complete": "Complete - idea created",
  "status_failed": "Failed",
  "view_idea_pool": "View in Idea Pool",
  "fork_another": "Fork another"
}
```

**de.json — add corresponding `"search"` namespace:**
```json
"search": {
  "title": "KI-Suche",
  "description": "Durchsuche Projekte, Ideen und Soul Documents mit KI.",
  "placeholder": "Stelle eine Frage zu deinen Projekten, Entscheidungen oder Ideen...",
  "searching": "Suche läuft...",
  "search_button": "Suchen",
  "searching_with_ai": "Suche mit KI...",
  "ai_answer": "KI-Antwort",
  "sources": "Quellen",
  "sources_count": "Quellen ({{count}})",
  "searched_at": "Gesucht um {{time}}"
}
```

**de.json — add `"emailDraft"` namespace:**
```json
"emailDraft": {
  "draft_reply": "Antwortentwurf",
  "status_pending": "Überprüfung ausstehend",
  "status_approved": "Genehmigt",
  "status_sent": "Gesendet",
  "status_rejected": "Abgelehnt",
  "field_to": "An:",
  "field_subject": "Betreff:",
  "created": "Erstellt: {{date}}",
  "updated": "Aktualisiert: {{date}}",
  "reject": "Ablehnen",
  "approve_send": "Genehmigen & Senden"
}
```

**de.json — add `"githubFork"` namespace:**
```json
"githubFork": {
  "placeholder": "https://github.com/owner/repo",
  "fork_analyze": "Forken & Analysieren",
  "url_hint": "Gültige GitHub-URL eingeben (z.B. https://github.com/owner/repo)",
  "error_empty_url": "Bitte eine GitHub-URL eingeben",
  "error_invalid_url": "URL muss ein gültiges GitHub-Repository sein (github.com/owner/repo)",
  "error_no_team": "Kein Team gefunden. Bitte erstelle oder tritt einem Team bei.",
  "error_unexpected": "Ein unerwarteter Fehler ist aufgetreten",
  "status_forking": "Wird geforkt...",
  "status_analyzing": "Code wird analysiert...",
  "status_complete": "Abgeschlossen – Idee erstellt",
  "status_failed": "Fehlgeschlagen",
  "view_idea_pool": "Im Ideenpool anzeigen",
  "fork_another": "Weiteres Repository forken"
}
```

IMPORTANT: German text must use proper Unicode umlauts (ä, ö, ü, Ä, Ö, Ü, ß) — never ASCII approximations. Translate full phrases, never concatenate.
  </action>
  <verify>Run `node -e "const en = require('./client/src/i18n/locales/en.json'); const de = require('./client/src/i18n/locales/de.json'); console.log('search keys:', Object.keys(en.search).length, Object.keys(de.search).length); console.log('emailDraft keys:', Object.keys(en.emailDraft).length, Object.keys(de.emailDraft).length); console.log('githubFork keys:', Object.keys(en.githubFork).length, Object.keys(de.githubFork).length);"` from eluma root — both files parse as valid JSON and all three namespaces exist with matching key counts.</verify>
  <done>en.json and de.json each contain search (~10 keys), emailDraft (~11 keys), and githubFork (~13 keys) namespaces with matching key counts and proper German Unicode.</done>
</task>

<task type="auto">
  <name>Task 2: Wire useLanguage into SearchBar, EmailDraftReview, and GitHubFork components</name>
  <files>client/src/components/SearchBar.tsx, client/src/components/EmailDraftReview.tsx, client/src/components/GitHubFork.tsx</files>
  <action>
For each of the three components, replace all hardcoded English strings with `t()` calls using the `useLanguage` hook (NOT `useTranslation` directly — this project wraps it in `useLanguage` from `../hooks/useLanguage.js`).

**SearchBar.tsx:**
1. Add `import { useLanguage } from "../hooks/useLanguage.js";`
2. Add `const { t } = useLanguage();` at top of `SearchBar` function body
3. Replace hardcoded strings:
   - `"Ask a question about your projects, decisions, or ideas..."` -> `t("search.placeholder")`
   - `"Searching..."` -> `t("search.searching")`
   - `"Search"` -> `t("search.search_button")`
   - `"Searching with AI..."` -> `t("search.searching_with_ai")`
   - `"AI Answer"` -> `t("search.ai_answer")`
   - `"Sources (${results.sources.length})"` part -> `t("search.sources_count", { count: results.sources.length })`
   - `"Searched at ..."` -> `t("search.searched_at", { time: new Date(results.executedAt).toLocaleTimeString() })`

**EmailDraftReview.tsx:**
1. Add `import { useLanguage } from "../hooks/useLanguage.js";`
2. Add `const { t } = useLanguage();` at top of `EmailDraftReview` function body
3. The module-level `STATUS_CONFIG` object has hardcoded label strings. Since `t()` requires a React component context (hook), move the label resolution INTO the component body. Replace `status.label` usage with `t()` calls:
   - Keep STATUS_CONFIG for bg/text colors only (remove `label` field)
   - Create a `statusLabel` mapping inside the component: `const statusLabel: Record<string, string> = { pending: t("emailDraft.status_pending"), approved: t("emailDraft.status_approved"), sent: t("emailDraft.status_sent"), rejected: t("emailDraft.status_rejected") };`
   - Use `statusLabel[draft.status] || statusLabel.pending` where `status.label` was used
4. Replace remaining strings:
   - `"Draft Reply"` -> `t("emailDraft.draft_reply")`
   - `"To:"` -> `t("emailDraft.field_to")`
   - `"Subject:"` -> `t("emailDraft.field_subject")`
   - `"Created: ..."` -> `t("emailDraft.created", { date: formatDate(draft.createdAt) })`
   - `"Updated: ..."` -> `t("emailDraft.updated", { date: formatDate(draft.updatedAt) })`
   - `"Reject"` -> `t("emailDraft.reject")`
   - `"Approve & Send"` -> `t("emailDraft.approve_send")`

**GitHubFork.tsx:**
1. Add `import { useLanguage } from "../hooks/useLanguage.js";`
2. Add `const { t } = useLanguage();` at top of `GitHubFork` function body
3. The module-level `statusMessages` object has hardcoded strings — move inside the component body and use `t()`:
   - `const statusMessages: Record<ForkStatus, string> = { idle: "", forking: t("githubFork.status_forking"), analyzing: t("githubFork.status_analyzing"), complete: t("githubFork.status_complete"), failed: t("githubFork.status_failed") };`
4. Replace remaining strings:
   - placeholder `"https://github.com/owner/repo"` -> `t("githubFork.placeholder")`
   - `"Fork & Analyze"` -> `t("githubFork.fork_analyze")`
   - `"Enter a valid GitHub URL (e.g., https://github.com/owner/repo)"` -> `t("githubFork.url_hint")`
   - `"Please enter a GitHub URL"` -> `t("githubFork.error_empty_url")`
   - `"URL must be a valid GitHub repository (github.com/owner/repo)"` -> `t("githubFork.error_invalid_url")`
   - `"No team found. Please create or join a team first."` -> `t("githubFork.error_no_team")`
   - `"An unexpected error occurred"` -> `t("githubFork.error_unexpected")`
   - `"View in Idea Pool"` -> `t("githubFork.view_idea_pool")`
   - `"Fork another"` -> `t("githubFork.fork_another")`

IMPORTANT: Do NOT change any styling, logic, or component structure. Only replace string literals with t() calls and add the import + hook call.
  </action>
  <verify>Run `cd /Users/developer/eluma && npx tsc --noEmit` — no TypeScript errors. Then grep each file for remaining hardcoded English: `grep -n '"[A-Z][a-z]' client/src/components/SearchBar.tsx client/src/components/EmailDraftReview.tsx client/src/components/GitHubFork.tsx` — should show only non-user-facing strings (type annotations, style values, etc.), no UI text.</verify>
  <done>All three components import useLanguage, call t() for every user-facing string, and compile without errors. No hardcoded English UI text remains in SearchBar.tsx, EmailDraftReview.tsx, or GitHubFork.tsx.</done>
</task>

</tasks>

<verification>
1. `cd /Users/developer/eluma && npx tsc --noEmit` passes with no errors
2. `node -e "JSON.parse(require('fs').readFileSync('client/src/i18n/locales/en.json','utf8'))"` — valid JSON
3. `node -e "JSON.parse(require('fs').readFileSync('client/src/i18n/locales/de.json','utf8'))"` — valid JSON
4. `grep -c "useLanguage" client/src/components/SearchBar.tsx client/src/components/EmailDraftReview.tsx client/src/components/GitHubFork.tsx` — each file shows at least 1 match
5. German translations contain proper umlauts (grep for "ae\|oe\|ue" in de.json search/emailDraft/githubFork sections returns 0 matches)
</verification>

<success_criteria>
- SearchBar, EmailDraftReview, and GitHubFork show all text in German when language is DE
- SearchBar, EmailDraftReview, and GitHubFork show all text in English when language is EN
- No hardcoded English strings remain in any of the three component files
- Both en.json and de.json are valid JSON with matching key structure
- TypeScript compilation passes
</success_criteria>

<output>
After completion, create `.planning/phases/10-client-i18n-coverage/10-01-SUMMARY.md`
</output>
