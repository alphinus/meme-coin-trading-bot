---
phase: 08-integrations
plan: 07
type: execute
wave: 3
depends_on: ["08-03", "08-05"]
files_modified:
  - client/src/hooks/useSearch.ts
  - client/src/components/SearchBar.tsx
  - client/src/components/GitHubFork.tsx
autonomous: true

must_haves:
  truths:
    - "User can input a GitHub URL to fork and see the analysis result as an idea"
    - "User can type natural-language search queries and see AI-powered results"
  artifacts:
    - path: "client/src/hooks/useSearch.ts"
      provides: "React hook for AI search with explicit submit"
      exports: ["useSearch"]
    - path: "client/src/components/SearchBar.tsx"
      provides: "Search input with AI-powered results display"
    - path: "client/src/components/GitHubFork.tsx"
      provides: "GitHub URL input with fork + analyze workflow"
  key_links:
    - from: "client/src/hooks/useSearch.ts"
      to: "/api/search/query"
      via: "fetch POST to search API"
      pattern: "fetch.*api/search"
    - from: "client/src/components/GitHubFork.tsx"
      to: "client/src/hooks/useIntegrations.ts"
      via: "forkRepo function from useIntegrations hook"
      pattern: "forkRepo"
---

<objective>
Create client components for GitHub fork workflow and AI search -- the GitHub and search portion of the client layer.

Purpose: Users can fork GitHub repos with AI analysis and ask natural-language questions through the search bar.
Output: useSearch hook, SearchBar component, GitHubFork component.
</objective>

<execution_context>
@/Users/developer/.claude/get-shit-done/workflows/execute-plan.md
@/Users/developer/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/08-integrations/08-03-SUMMARY.md
@.planning/phases/08-integrations/08-05-SUMMARY.md
@.planning/phases/08-integrations/08-06-SUMMARY.md
@client/src/hooks/useIntegrations.ts
@client/src/hooks/useProjects.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: useSearch hook and SearchBar component</name>
  <files>
    client/src/hooks/useSearch.ts
    client/src/components/SearchBar.tsx
  </files>
  <action>
1. Create `client/src/hooks/useSearch.ts`:
   - State: query, results (SearchResult | null), loading, error, history
   - `search(query: string)`: POST /api/search/query { query, language } -> returns SearchResult
   - `fetchHistory()`: GET /api/search/history -> returns recent queries
   - Debounce: do NOT auto-search on typing. Only search on explicit submit (button or Enter key).
   - Export useSearch

2. Create `client/src/components/SearchBar.tsx`:
   - Text input with search icon, submit button
   - On submit (Enter key or button click), calls search(query) from useSearch hook
   - Displays results: answer text in a card, sources as collapsible list below
   - Loading spinner while searching
   - Position: designed to be placed in the navigation bar or as a standalone component
   - Tailwind styling: w-full max-w-2xl, rounded input, shadow on focus
   - Empty state: prompt text "Ask a question about your projects, decisions, or ideas..."
  </action>
  <verify>
    Run `cd /Users/developer/eluma && npx tsc --noEmit` -- zero errors.
    Verify useSearch.ts exports useSearch hook.
    Grep for "SearchBar" in SearchBar.tsx.
    Grep for "/api/search/query" in useSearch.ts.
  </verify>
  <done>
    useSearch hook handles AI search with explicit submit. SearchBar shows search input + AI results with loading state. Both TypeScript compile.
  </done>
</task>

<task type="auto">
  <name>Task 2: GitHubFork component</name>
  <files>
    client/src/components/GitHubFork.tsx
  </files>
  <action>
Create `client/src/components/GitHubFork.tsx`:
   - Text input for GitHub URL (placeholder: "https://github.com/owner/repo")
   - "Fork & Analyze" button
   - On submit: validate URL format (must contain github.com), call forkRepo(url) from useIntegrations hook
   - Show status: "Forking...", "Analyzing code...", "Complete - idea created" or "Failed"
   - When complete, show link to the created idea in the Idea Pool (/ideas)
   - URL validation: simple regex check for github.com/owner/repo pattern
   - Tailwind styling: input-group with button, status below, link styled as text-blue-600
  </action>
  <verify>
    Run `cd /Users/developer/eluma && npx tsc --noEmit` -- zero errors.
    Verify GitHubFork.tsx exists and is importable.
    Grep for "forkRepo" in GitHubFork.tsx.
  </verify>
  <done>
    GitHubFork component handles URL input, validation, fork initiation, and status display. Links to Idea Pool when analysis is complete. TypeScript compiles.
  </done>
</task>

</tasks>

<verification>
- `npx tsc --noEmit` passes
- useSearch hook exports search and fetchHistory
- SearchBar renders with input, submit, and results display
- GitHubFork validates URLs and calls forkRepo
</verification>

<success_criteria>
GitHub and Search client components complete. SearchBar provides AI-powered search. GitHubFork handles the fork-and-analyze workflow. All components ready for Integrations page assembly.
</success_criteria>

<output>
After completion, create `.planning/phases/08-integrations/08-07-SUMMARY.md`
</output>
